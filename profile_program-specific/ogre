safe_alias o ogre
safe_alias od 'ogre deploy'
ok() {
  ogre k8s -n $(git rev-parse --abbrev-ref HEAD 2>&1) $@
}
okpod() {
  ok get pod | pbcopy
  # Assume any lines that don't match expected patterns must be error messages,
  # and send them to stderr:
  for name in $@; do
    case $name in
      metroid)  name='metroid-[a-z-]*'  ;;
      kombucha) name='kombucha-[a-z-]*' ;;
    esac
    pbpaste | awk '!/NAME|[0-9]\/[0-9]/ { print $0 }' >&2
    # For expected lines, extract the one matching our requested name:
    pbpaste | awk '/^'$name'-[0-9a-z]+-[0-9a-z]+ / { print $1 }' | cat
  done
}
okdp() {
  for pod in $(okpod $@); do
    ok delete pod $pod
  done
}
oke() {
  name=$1; shift
  ok exec -it $(okpod $name) $@
}
okes() {
  oke $1 sh
}
okl() {
  name=$1; shift
  container=$1; shift
  ok logs $@ $(okpod $name) $container
}

safe_alias oe 'ogre exec'

safe_alias ou "ogre version -update"
safe_alias ov "ogre version"
safe_alias ovu "ogre version -update"
