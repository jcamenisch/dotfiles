is_executable rl || rl () {
  _GIT_ROOT=$(git rev-parse --show-toplevel)

  if [[ -x $_GIT_ROOT/script/rails ]]; then
    # We're in a rails 3+ app
    bundle exec $_GIT_ROOT/script/rails $*
  elif [[ -x $_GIT_ROOT/script/$1 ]]; then
    # This must be a rails 2 app; oh my
    bundle exec $_GIT_ROOT/script/$*
  else
    echo "This doesn't seem to be a rails directory; doing nothing"
  fi

  unset _GIT_ROOT
}

safe_alias rc "rl console"
safe_alias rd "rl dbconsole"
safe_alias rr "rl runner"
safe_alias rs "rl server"
