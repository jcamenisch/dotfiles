if [[ -d ~/uservoice ]]; then
  UV_DIR=~/uservoice
  export UV_METROID_DIR="$UV_DIR/metroid"
  export UV_RAILS_DIR="$UV_DIR/uservoice"
  export UV_SAMUS_DIR="$UV_DIR/samus"
fi

if ! is_executable v && [[ -n "$VAGRANT_HOME$DEFAULT_VAGRANT_HOME" ]]; then
  v() {
    ORIG_PATH=`pwd`
    [[ -n "$VAGRANT_HOME" ]] && ORIG_VAGRANT_HOME=$VAGRANT_HOME

    [[ -f ./Vagrantfile ]] || (git rev-parse --show-toplevel >/dev/null 2>&1 && cd $(git rev-parse --show-toplevel) >/dev/null)
    [[ -f ./Vagrantfile ]] || cd "${VAGRANT_HOME:-$DEFAULT_VAGRANT_HOME}"

    if [[ -f ./Vagrantfile ]]; then
      VAGRANT_HOME=`pwd`
      vagrant $@

      cd $ORIG_PATH >/dev/null
      unset ORIG_PATH
      unset VAGRANT_HOME
      [[ -n "$ORIG_VAGRANT_HOME" ]] && VAGRANT_HOME=$ORIG_VAGRANT_HOME
    fi
  }
  alias vu='v up'
  alias vss='v ssh'
  alias vs='v status'
fi
